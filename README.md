# Master Thesis - Development of a Strategy for Secure Cloud Migration
## Introduction
The main proposal of the thesis is to develop a strategy to achieve cloud migration securely while optimizing the migration process. The following image shows the proposed strategy.

<p align="center">
  <img src="https://github.com/marina-aa00/TFM/assets/97545805/cfd5898d-8f69-4aba-bce0-d4d3ea6da27a" height="250" width="600"/>
</p>






The strategy is validated by implementing it within the context of a medium size Fintech enterprise which is migrating their infrastructure and services to the cloud. Such enterprise counts with the following resources, which are located on their on-premise site: 
- Two applications that allow clients of the company to perform incoming and outgoing financial transactions respectively.
- A server used by employees of the enterprise which hosts an application to track client's payments and perform currency exchange operations over the payments.
- Several personal computers used by the employees to carry out their duties.
- An SQL Server to store the data related to the financial transactions.
## Repository Description 
This repository contains all the scripts used to deploy the secure cloud architecture of the enterprise in Azure. To do so, various Infrastucture as Code languages have been used, including Terraform, Azure Resource Manager and Bash. 

## Secure Cloud Architecture 



<p align="center">
  <img src="https://github.com/marina-aa00/TFM/assets/97545805/a00b5200-781b-4fed-b26f-f10258361e3c" height="800" width="600"/>
</p>







The functionality of the components of the architecture is the following: 
- SQL Server and Database: it is used to store the data related to the financial transactions. The security measures that apply to this component are:
  - Data encryption
  - Azure Key Vault integration (to have access to encryption keys)
  - Log monitoring
  - Private access through private endpoint
- App Services: they are used to host both financial transaction applications. The code used for these applications can be found at the following Github repository: . The security measures that apply to this component are:
      - Access restrictions
      - Azure AD authentication and Multifactor authentication
      - Azure Key Vault integration (to have access to application secrets and SQL Server connection strings)
      - Log monitoring 
- Application Gateway: it is used as a centralized entry point for the traffic generated by the previously mentioned applications. The security measures that apply to this component are:
      - Web Application Firewall, to protect the previous applications
      - Log monitoring and metrics explorer
- Azure Function: it is used to host an application that executes the currency exchange operations. The code for this application can be found in the following repository: . The security measures that apply to this component are:
      - Azure Key Vault integration (to have access to the keys used by the Function App to authenticate incoming requests)
      - Private access through private endpoint
- Storage Account: it is used to host the data needed by the Azure Function to work properly. The security measures that apply to this component are:
      - Private access through private endpoint
- Virtual machines: they are used to provide virtual desktops for the employees of the enterprise  (Subnet Virtual Desktops) and to host the application that tracks the client's payments (Subnet Server). Additionally, an SQL Server on VM resource is used to perform backup of the data of the SQL Database. The security measures that apply to this component are:
      - Azure AD authentication
      - OS Disk encryption
      - Vulnerability assesment solution
      - Log monitoring and metrics explorer
      - Data backup
      - Antivirus
      - Azure key vault integration (to have access to local passwords and encryption keys used to protect the OS disks)
      - Just in time VM access (only for the VM that hosts the tracking application)
- Azure Bastion: it is used to allow employees to connect to their virtual desktops securely, through TLS, and as consequence avoid having public IP addresses for the virtual desktops.
- Azure Recovery Services Vault: it is used to backup the data from the VMs. The security measures that apply to this component are:
      - Data encryption
      - Azure Key Vault integration (to have access to the keys used for encryption)
- Azure NAT GW: it is used to provide outbound connectivity for the users of the virtual desktops.
- Azure Firewall: it is used to control the outbound traffic users of the virtual desktops have access to. The security measures that apply to this component are:
      - Log monitoring
- Azure Key Vault: it is used to host various sensitive data such as application secrets, encryption keys, authentication keys (Function App) and connection strings. The security measures that apply to this component are:
      - Access policies
      - Secret expiration and key rotation
      - Firewall rules
Additionally, it has been incorporated to the architecture Role based access control, DDoS protection and Netwrok Security Groups (to control the communication between virtual machines)

